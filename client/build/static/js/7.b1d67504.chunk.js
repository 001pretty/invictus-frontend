(this["webpackJsonp002-cloning"]=this["webpackJsonp002-cloning"]||[]).push([[7],{84:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),s=a(80),l=a(4),o=a(2),i=a(10),m=a.n(i),u=(a(84),a(9));var d=function(){var e=Object(s.a)(),t=e.register,a=e.handleSubmit,i=e.errors,d=Object(n.useState)(""),p=Object(c.a)(d,2),h=p[0],f=p[1],E=Object(n.useState)([]),b=Object(c.a)(E,2),g=b[0],y=b[1],x=Object(n.useState)(),v=Object(c.a)(x,2),C=v[0],k=v[1],O=Object(n.useContext)(u.a),j=O.token,N=O.userId,L=Object(c.a)(N,1)[0],T=Object(c.a)(j,1)[0],I=Object(l.g)(),S=Object(n.useRef)();return Object(n.useEffect)((function(){S.current.focus()}),[]),Object(n.useEffect)((function(){m.a.post("/items/cartitems",{userId:L},{headers:{Authorization:"Bearer "+T}}).then((function(e){var t=0;e.data.foundCartItems.forEach((function(e){t+=parseFloat(e.price.slice(0,-1))*e.q[e._id]})),k(t.toFixed(2)),y(e.data.foundCartItems)})).catch((function(e){console.log(e)}))}),[T,L]),r.a.createElement("form",{onSubmit:a((function(e,t){t.preventDefault(),m.a.post("/items/order",{products:{products:g,totalPrice:C},user:{information:{firstname:e.firstname,lastname:e.lastname,address:e.address,postalcode:e.postalcode,city:e.city},userId:L}},{headers:{Authorization:"Bearer "+T}}).then((function(e){I.push("/profile")})).catch((function(e){console.log(e),f("Invalid input.")}))}))},r.a.createElement("div",{className:"CheckoutContainer"},r.a.createElement("div",{className:"CheckoutFormWrapper"},r.a.createElement("div",{className:"CheckoutForm"},i.firstname&&r.a.createElement("p",{className:"CheckoutText",style:{color:"red"}},"Firstname is invalid"),i.lastname&&r.a.createElement("p",{className:"CheckoutText",style:{color:"red"}},"Lastname is invalid"),i.address&&r.a.createElement("p",{className:"CheckoutText",style:{color:"red"}},"Address is invalid"),i.postalcode&&r.a.createElement("p",{className:"CheckoutText",style:{color:"red"}},"Postal code is invalid"),i.city&&r.a.createElement("p",{className:"CheckoutText",style:{color:"red"}},"City is invalid"),r.a.createElement("p",{className:"LoginText",style:{color:"red"}},h),r.a.createElement("div",{className:"CheckoutHeading"},"Invictus Store"),r.a.createElement("p",{className:"CheckoutText"},"Shipping address:"),r.a.createElement("input",{type:"text",placeholder:"First name",name:"firstname",alt:"firstname",ref:function(e){t(e,{required:!0,minLength:2,maxLength:35}),S.current=e}}),r.a.createElement("input",{type:"text",placeholder:"Last name",name:"lastname",alt:"lastname",ref:t({required:!0,minLength:2,maxLength:35})}),r.a.createElement("input",{type:"text",placeholder:"Address",name:"address",alt:"address",ref:t({required:!0,minLength:5,maxLength:35})}),r.a.createElement("input",{type:"number",placeholder:"Postal code",name:"postalcode",alt:"postalcode",ref:t({required:!0,minLength:5,maxLength:5})}),r.a.createElement("input",{type:"text",placeholder:"City",name:"city",alt:"city",ref:t({required:!0,minLength:2,maxLength:35})}),r.a.createElement("button",{type:"submit",className:"btn effect01",target:"_blank"},r.a.createElement("span",null,"ORDER NOW")),r.a.createElement("br",null),r.a.createElement("div",{className:"CheckoutText"},"Want to make some changes?"," ",r.a.createElement(o.b,{to:"/cart",style:{color:"inherit"}},"Return to cart"))))))};t.default=function(){return r.a.createElement("div",null,r.a.createElement(d,null))}}}]);
//# sourceMappingURL=7.b1d67504.chunk.js.map