{"version":3,"sources":["components/cart/MainCart.js","pages/Cart.js"],"names":["MainCart","useState","cartItems","setCartItems","totalPrice","setTotalPrice","useContext","AuthContext","token","userId","userIdValue","tokenValue","history","useHistory","useEffect","axios","post","headers","Authorization","then","res","data","foundCartItems","length","total","forEach","item","parseFloat","price","slice","q","_id","toFixed","catch","err","console","log","className","style","marginBottom","Array","isArray","map","key","listStyleType","alt","src","imageUrl","name","onClick","e","id","itemId","push","to","target","Cart","Header","Footer"],"mappings":"sOAgIeA,MAxHf,WAAqB,IAAD,EACgBC,mBAAS,IADzB,mBACXC,EADW,KACAC,EADA,OAEkBF,mBAAS,GAF3B,mBAEXG,EAFW,KAECC,EAFD,OAGQC,qBAAWC,KAA7BC,EAHU,EAGVA,MAAOC,EAHG,EAGHA,OACRC,EAJW,YAIKD,EAJL,MAKXE,EALW,YAKIH,EALJ,MAOZI,EAAUC,cAqDhB,OAnDAC,qBAAU,WACRC,IACGC,KACC,mBACA,CAAEP,OAAQC,GACV,CACEO,QAAS,CACPC,cAAe,UAAYP,KAIhCQ,MAAK,SAACC,GACL,GAAsC,IAAnCA,EAAIC,KAAKC,eAAeC,OAA3B,CAIA,IAAIC,EAAQ,EACZJ,EAAIC,KAAKC,eAAeG,SAAQ,SAACC,GAC/BF,GACUG,WAAWD,EAAKE,MAAMC,MAAM,GAAI,IAAMH,EAAKI,EAAEJ,EAAKK,QAE9D1B,EAAcmB,EAAMQ,QAAQ,IAC5B7B,EAAaiB,EAAIC,KAAKC,qBATpBnB,EAAa,WAWhB8B,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAEf,CAACvB,EAAYD,IAyBd,yBAAK2B,UAAU,iBACb,yBAAKA,UAAU,aAAaC,MAAO,CAAEC,aAAc,SACjD,oCAEF,yBAAKF,UAAU,sBACb,yBAAKA,UAAU,sBACb,yBAAKA,UAAU,kBAAf,WACA,yBAAKA,UAAU,iBAAf,UAEF,yBAAKA,UAAU,kBACZG,MAAMC,QAAQvC,IAAcA,EAAUqB,OACrCrB,EAAUwC,KAAI,SAAChB,GAAD,OACZ,wBAAIiB,IAAKjB,EAAKK,IAAKO,MAAO,CAAEM,cAAe,SACzC,yBAAKP,UAAU,WACb,yBAAKA,UAAU,2BACb,yBAAKA,UAAU,aACb,yBAAKQ,IAAI,YAAYC,IAAK,IAAMpB,EAAKqB,YAEvC,yBAAKV,UAAU,8BACb,2BAAIX,EAAKsB,MACT,wCAActB,EAAKI,EAAEJ,EAAKK,QAG9B,yBAAKM,UAAU,6BACb,2BAAIX,EAAKE,OACT,yBACES,UAAU,aACVY,QAAS,SAACC,GAAD,OAlDFC,EAkD2BzB,EAAKK,SAjDzDhB,IACGC,KACC,oBACA,CACEP,OAAQC,EACR0C,OAAQD,GAEV,CACElC,QAAS,CACPC,cAAe,UAAYP,KAIhCQ,MAAK,SAACC,GACLR,EAAQyC,KAAK,YAEdpB,OAAM,SAACC,GACNC,QAAQC,IAAIF,MAlBQ,IAACiB,IAoDP,4CAOI,SAAdjD,EACA,6CAAwB,0CAG5B,yBAAKmC,UAAU,aACb,oCACQ,+BAAKjC,EAAL,YAGToC,MAAMC,QAAQvC,IAAcA,EAAUqB,OACrC,kBAAC,IAAD,CAAM+B,GAAG,aACP,4BAAQjB,UAAU,eAAekB,OAAO,UACtC,uDAIJ,wCCzGKC,UAVf,WACE,OACE,6BACE,kBAACC,EAAA,EAAD,MACA,kBAAC,EAAD,MACA,kBAACC,EAAA,EAAD","file":"static/js/6.c83ce99e.chunk.js","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nimport \"./MainCart.css\";\r\n\r\nimport { AuthContext } from \"context/AuthContext\";\r\n\r\nfunction MainCart() {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [totalPrice, setTotalPrice] = useState(0); \r\n  const { token, userId } = useContext(AuthContext); \r\n  const [userIdValue,] = userId;\r\n  const [tokenValue,] = token;\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\r\n        \"/items/cartitems\",\r\n        { userId: userIdValue }, \r\n        {\r\n          headers: {\r\n            Authorization: \"Bearer \" + tokenValue,\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        if(res.data.foundCartItems.length === 0) {\r\n          setCartItems('none')\r\n          return\r\n        }\r\n        let total = 0;\r\n        res.data.foundCartItems.forEach((item) => {\r\n          total =\r\n            total + parseFloat(item.price.slice(0, -1)) * item.q[item._id];\r\n        });\r\n        setTotalPrice(total.toFixed(2));\r\n        setCartItems(res.data.foundCartItems);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [tokenValue, userIdValue]);\r\n\r\n  const removeCartHandler = (id) => {\r\n    axios\r\n      .post(\r\n        \"/items/removecart\",\r\n        {\r\n          userId: userIdValue,\r\n          itemId: id,\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: \"Bearer \" + tokenValue,\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        history.push(\"/cart\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"CartContainer\">\r\n      <div className=\"Mens-Title\" style={{ marginBottom: \"20px\" }}>\r\n        <p>CART</p>\r\n      </div>\r\n      <div className=\"CartContentWrapper\">\r\n        <div className=\"CartHeadingWrapper\">\r\n          <div className=\"CartColumnName\">PRODUCT</div>\r\n          <div className=\"CartColumnTwo\">PRICE</div>\r\n        </div>\r\n        <div className=\"CartRowWrapper\">\r\n          {Array.isArray(cartItems) && cartItems.length ? (\r\n            cartItems.map((item) => (\r\n              <li key={item._id} style={{ listStyleType: \"none\" }}>\r\n                <div className=\"CartRow\">\r\n                  <div className=\"CartImageAndNameWrapper\">\r\n                    <div className=\"CartImage\">\r\n                      <img alt=\"cartImage\" src={\"/\" + item.imageUrl} />\r\n                    </div>\r\n                    <div className=\"CartNameAndQuantityWrapper\">\r\n                      <p>{item.name}</p>\r\n                      <p>Quantity: {item.q[item._id]}</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"CartPriceAndRemoveWrapper\">\r\n                    <p>{item.price}</p>\r\n                    <div\r\n                      className=\"CartRemove\"\r\n                      onClick={(e) => removeCartHandler(item._id, e)}\r\n                    >\r\n                      <p>remove</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            ))\r\n          ) : (\r\n            cartItems === 'none' ?\r\n            <p>Cart is empty.</p> : <p>Loading...</p>\r\n          )}\r\n        </div>\r\n        <div className=\"CartTotal\">\r\n          <p>\r\n            TOTAL:<b> {totalPrice}â‚¬</b>\r\n          </p>\r\n        </div>\r\n        {Array.isArray(cartItems) && cartItems.length ? (\r\n          <Link to=\"/checkout\">\r\n            <button className=\"btn effect01\" target=\"_blank\">\r\n              <span>PROCEED TO CHECKOUT</span>\r\n            </button>\r\n          </Link>\r\n        ) : (\r\n          <></>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainCart;\r\n","import React from \"react\";\r\n\r\nimport Header from \"components/shared/Header/Header\";\r\nimport Footer from \"components/shared/Footer/Footer\";\r\nimport MainCart from \"components/cart/MainCart\";\r\n\r\nfunction Cart() {\r\n  return (\r\n    <div>\r\n      <Header />\r\n      <MainCart />\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Cart;\r\n"],"sourceRoot":""}